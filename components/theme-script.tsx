export function ThemeScript() {
  const script = `(function(){try{var STORAGE_KEY='theme';var root=document.documentElement;var mediaQuery=window.matchMedia('(prefers-color-scheme: dark)');function getTheme(){var saved=localStorage.getItem(STORAGE_KEY);if(saved==='light'||saved==='dark'){return saved;}return mediaQuery.matches?'dark':'light';}function getCurrentTheme(){return root.getAttribute('data-theme')==='dark'?'dark':'light';}function updateToggle(theme){var toggles=document.querySelectorAll('.js-theme-toggle');for(var i=0;i<toggles.length;i+=1){var toggle=toggles[i];var lightLabel=toggle.getAttribute('data-light-label')||'Light';var darkLabel=toggle.getAttribute('data-dark-label')||'Dark';var nextLabel=theme==='dark'?lightLabel:darkLabel;toggle.textContent=nextLabel;toggle.setAttribute('aria-label',nextLabel);}}function syncToggleLabel(){updateToggle(getCurrentTheme());}function applyTheme(theme,persist){root.setAttribute('data-theme',theme);if(persist){localStorage.setItem(STORAGE_KEY,theme);}updateToggle(theme);}function toggleTheme(){var current=getCurrentTheme();var next=current==='dark'?'light':'dark';applyTheme(next,true);}function queueInitialToggleSync(){if(document.readyState==='loading'){document.addEventListener('DOMContentLoaded',function(){syncToggleLabel();});}else{syncToggleLabel();}window.addEventListener('load',syncToggleLabel);}applyTheme(getTheme(),false);queueInitialToggleSync();document.addEventListener('click',function(event){var target=event.target;if(target instanceof Element){var toggle=target.closest('.js-theme-toggle');if(toggle){event.preventDefault();toggleTheme();}}});mediaQuery.addEventListener('change',function(){if(!localStorage.getItem(STORAGE_KEY)){applyTheme(mediaQuery.matches?'dark':'light',false);}});}catch(e){document.documentElement.setAttribute('data-theme','light');}})();`

  return <script dangerouslySetInnerHTML={{ __html: script }} />
}
